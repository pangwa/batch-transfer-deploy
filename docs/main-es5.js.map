{"version":3,"sources":["webpack:///util (ignored)","webpack:///src/app/meta/loading.service.ts","webpack:///util (ignored)?e5e2","webpack:///buffer (ignored)?6a25","webpack:///buffer (ignored)","webpack:///src/app/meta/meta-sender/meta-sender.component.html","webpack:///util (ignored)?144c","webpack:///src/app/util/util.module.ts","webpack:///util (ignored)?38f5","webpack:///crypto (ignored)","webpack:///buffer (ignored)?6e73","webpack:///readable-stream (ignored)","webpack:///src/app/app.component.css","webpack:///src/app/meta/balance.pipe.ts","webpack:///src/environments/environment.ts","webpack:///src/app/util/web3.service.ts","webpack:///src/app/meta/meta.module.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/meta/meta-sender/meta-sender.component.scss","webpack:///src/app/meta/meta-sender/meta-sender.component.ts","webpack:///src/main.ts"],"names":["LoadingService","loaders","tx","setTimeout","providedIn","UtilModule","imports","providers","declarations","BN","BalancePipe","v","args","decimals","value","div","pow","toString","name","environment","production","Web3","contract","Web3Service","ready","accountsObservable","window","addEventListener","event","bootstrapWeb3","chainIdObs","pipe","chainId","ethereum","enable","then","web3","console","log","HttpProvider","prototype","sendAsync","send","setInterval","refreshAccounts","artifacts","delay","Promise","resolve","artifactsToContract","contractAbstraction","setProvider","currentProvider","eth","getAccounts","accs","length","warn","accounts","next","get","parseInt","abi","address","Contract","addr","utils","isAddress","MetaModule","exports","AppComponent","loadingService","title","isLoading","getTx","selector","template","AppModule","bootstrap","webpackEmptyAsyncContext","req","e","Error","code","keys","module","id","wallebot_artifacts","erc20_artifacts","predefinedTokens","emptyTokenArray","maxSize","MetaSenderComponent","web3Service","matSnackBar","tokenControl","transAddress","addresses","displayedColumns","dataSource","dataObservable","tokenObservable","model","amount","receiver","balance","account","tokenAddress","status","watchAccount","obContract","loadTransContract","sub","subscribe","data","ownerAccount","owners","instance","unsubscribe","filteredTokens","valueChanges","getChainIdObs","getTokens","filter","token","obToken","$subToken","transferData","addLoading","loadTokenContractData","removeLoading","ex","error","info","setStatus","$messageSub","batchContract","tokenInfo","err","unsub","s","$subAccount","$subLoadBalance","$subFile","paginator","refreshBalance","open","duration","WalleBot","deployed","deployedWalleBot","sendCoin","sendTransaction","from","transaction","target","acct","option","tokenContract","methods","balanceOf","call","symbol","WalleBotAbstraction","walleBot","files","droppedFile","fileEntry","isFile","file","size","relativePath","loadFileContent","readFile","content","columns","skip_empty_lines","rows","fileName","row","Number","setAddressess","obs","reader","FileReader","onerror","onabort","onload","result","onloadend","complete","readAsText","invalidAccount","firstInvalidAccount","totalAmount","getTotalAmount","convertAmountToRaw","isGreaterThan","amounts","ret","batchSend","on","setTx","item","total","isAddressValid","multipliedBy","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["/* (ignored) */","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoadingService {\n  private loaders = 0;\n  private tx = '';\n\n  constructor() { }\n\n  public addLoading() {\n    setTimeout(() => this.loaders++);\n  }\n\n  public removeLoading() {\n    setTimeout(() => {\n      if (this.loaders <= 0 ) {\n        return;\n      }\n      this.loaders--;\n    });\n  }\n\n  public stopLoading() {\n    setTimeout(() => this.loaders = 0);\n  }\n\n  public isLoading() {\n    return this.loaders > 0 || this.tx;\n  }\n\n  public setTx(tx: string) {\n    setTimeout(() => this.tx = tx);\n  }\n\n  public getTx(): string {\n    return this.tx;\n  }\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","export default \"<div class=\\\"container\\\">\\n  <mat-card class=\\\"settings\\\">\\n    <mat-card-title>\\n      转账设置\\n      <button *ngIf=\\\"isMainnet(); else testNet\\\" mat-button color=\\\"warn\\\">主网</button>\\n      <ng-template #testNet>\\n        <button mat-button color=\\\"primary\\\">测试网</button>\\n      </ng-template>\\n    </mat-card-title>\\n    <mat-card-content>\\n      <mat-form-field appearance=\\\"fill\\\" class=\\\"address-field\\\">\\n        <mat-label>批量转账合约地址</mat-label>\\n        <input matInput [value]=\\\"transAddress\\\">\\n      </mat-form-field>\\n      <mat-form-field id=\\\"address-selector\\\" class=\\\"address-field\\\">\\n        <mat-select name=\\\"account\\\" (selectionChange)=\\\"refreshBalance()\\\" [(value)]=\\\"model.account\\\" placeholder=\\\"账号\\\">\\n          <mat-option *ngFor=\\\"let account of accounts\\\" [value]=\\\"account\\\">{{account}}</mat-option>\\n        </mat-select>\\n      </mat-form-field>\\n      <button mat-button color=\\\"primary\\\" *ngIf=\\\"!isOwner() && model.account\\\">注意: 当前账号非管理账号</button>\\n      <br>\\n      <mat-form-field class=\\\"token-field\\\">\\n        <input type=\\\"text\\\"\\n          placeholder=\\\"选择ERC20代币\\\"\\n          aria-label=\\\"Token\\\"\\n          matInput\\n          [formControl]=\\\"tokenControl\\\"\\n          [matAutocomplete]=\\\"auto\\\">\\n        <mat-autocomplete autoActiveFirstOption #auto=\\\"matAutocomplete\\\"\\n          [displayWith]=\\\"displayTokenFn\\\"\\n          (optionSelected)=\\\"selectedToken($event)\\\"\\n        >\\n          <mat-option *ngFor=\\\"let token of filteredTokens | async\\\" [value]=\\\"token\\\">\\n            {{displayTokenFn(token)}}\\n          </mat-option>\\n        </mat-autocomplete>\\n      </mat-form-field>\\n    </mat-card-content>\\n    <mat-card-actions>\\n      <button mat-button color=\\\"accent\\\" *ngIf=\\\"tokenInfo\\\">\\n        {{tokenInfo.name}}\\n      </button>\\n      <button mat-button color=\\\"primary\\\" *ngIf=\\\"tokenInfo\\\">\\n        合约余额:\\n        {{tokenInfo?.balance | balance: tokenInfo?.decimals }} {{tokenInfo?.symbol}}\\n      </button>\\n    </mat-card-actions>\\n  </mat-card>\\n  <mat-card *ngIf=\\\"!tokenInfo\\\" class=\\\"placeholder\\\">\\n    请在左侧设置代币信息\\n  </mat-card>\\n  <mat-card *ngIf=\\\"tokenInfo\\\" class=\\\"details\\\">\\n    <mat-card-content class=\\\"send-form\\\">\\n      <ngx-file-drop dropZoneLabel=\\\"拖动地址列表文件到这里\\\"\\n        *ngIf=\\\"!fileName\\\"\\n        accept=\\\".csv\\\"\\n        (onFileDrop)=\\\"dropped($event)\\\" [multiple]=\\\"false\\\">\\n        <ng-template ngx-file-drop-content-tmp let-openFileSelector=\\\"openFileSelector\\\">\\n          拖动地址列表文件(CSV格式)到这里\\n          <button type=\\\"button\\\" (click)=\\\"openFileSelector()\\\">选择文件</button>\\n        </ng-template>\\n      </ngx-file-drop>\\n      <mat-toolbar *ngIf=\\\"fileName\\\">\\n        <mat-toolbar-row>\\n          <span>发送代币({{fileName}})  共{{this.addresses.length}}条, 合计{{getTotalAmount()}} {{tokenInfo?.symbol}}</span>\\n          <span class=\\\"example-spacer\\\"></span>\\n          <button mat-icon-button class=\\\"example-icon select-icon\\\" aria-label=\\\"select\\\" (click)=\\\"selectFile()\\\">\\n            <mat-icon>refresh</mat-icon>\\n          </button>\\n          <button mat-icon-button class=\\\"example-icon send-icon\\\" color=\\\"accent\\\" aria-label=\\\"发送\\\" (click)=\\\"doTransfer()\\\">\\n            <mat-icon>send</mat-icon>\\n          </button>\\n        </mat-toolbar-row>\\n      </mat-toolbar>\\n      <table *ngIf=\\\"fileName\\\" mat-table [dataSource]=\\\"dataSource\\\" class=\\\"mat-elevation-z8 account-table\\\">\\n        <ng-container matColumnDef=\\\"name\\\">\\n          <th mat-header-cell *matHeaderCellDef> 姓名 </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.name}} </td>\\n        </ng-container>\\n        <ng-container matColumnDef=\\\"address\\\">\\n          <th mat-header-cell *matHeaderCellDef> 地址</th>\\n          <td mat-cell *matCellDef=\\\"let element\\\" [class.invalid-address]=\\\"!isAddressValid(element.address)\\\"> {{element.address}} </td>\\n        </ng-container>\\n        <ng-container matColumnDef=\\\"operations\\\">\\n          <th mat-header-cell *matHeaderCellDef> 操作</th>\\n          <td mat-cell *matCellDef=\\\"let element\\\">\\n            <button mat-icon-button class=\\\"delete-button\\\" (click)=\\\"deleteItem(element)\\\">\\n              <mat-icon>delete</mat-icon>\\n            </button>\\n          </td>\\n        </ng-container>\\n        <ng-container matColumnDef=\\\"amount\\\">\\n          <th mat-header-cell *matHeaderCellDef> 数额 </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.amount}} </td>\\n        </ng-container>\\n        <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n        <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n      </table>\\n      <mat-paginator\\n        [class.hidden]=\\\"addresses.length === 0\\\"\\n        [pageSize]=\\\"10\\\"\\n        [pageSizeOptions]=\\\"[5, 10, 20]\\\"\\n        showFirstLastButtons></mat-paginator>\\n    </mat-card-content>\\n  </mat-card>\\n</div>\\n\";","/* (ignored) */","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {Web3Service} from './web3.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  providers: [\n    Web3Service\n  ],\n  declarations: []\n})\nexport class UtilModule {\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","export default \"\\n.example-spacer {\\n  flex: 1 1 auto;\\n}\\n\\n.spinner {\\n  margin-left: 1em;\\n}\\n\\n.tx-details {\\n  display: flex;\\n  flex-direction: row;\\n  line-height: 1em;\\n}\\n\\n.tx-details-wrapper {\\n  line-height: 1em;\\n}\\n\\n.pending-tx {\\n  display: inline-block;\\n  width: 120px;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWixtQkFBbUI7RUFDbkIsZ0JBQWdCO0VBQ2hCLHVCQUF1QjtBQUN6QiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG4uZXhhbXBsZS1zcGFjZXIge1xuICBmbGV4OiAxIDEgYXV0bztcbn1cblxuLnNwaW5uZXIge1xuICBtYXJnaW4tbGVmdDogMWVtO1xufVxuXG4udHgtZGV0YWlscyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGxpbmUtaGVpZ2h0OiAxZW07XG59XG5cbi50eC1kZXRhaWxzLXdyYXBwZXIge1xuICBsaW5lLWhlaWdodDogMWVtO1xufVxuXG4ucGVuZGluZy10eCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDEyMHB4O1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbn1cbiJdfQ== */\";","import { Pipe, PipeTransform } from '@angular/core';\ndeclare let require: any;\nconst BN = require('bignumber.js');\n\n@Pipe({\n  name: 'balance'\n})\nexport class BalancePipe implements PipeTransform {\n\n  transform(v: unknown, ...args: unknown[]): unknown {\n    let [ decimals ] = args;\n    decimals = decimals || 18;\n\n    const value = new BN(v);\n    decimals = decimals || 18;\n    return value.div(new BN(10).pow(decimals)).toString();\n  }\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import {Injectable} from '@angular/core';\nimport {Subject} from 'rxjs';\nimport * as _ from 'lodash';\ndeclare let require: any;\nconst Web3 = require('web3');\nconst contract = require('@truffle/contract');\nimport { timer, Observable } from 'rxjs';\nimport { map, distinctUntilChanged } from 'rxjs/operators';\n\ndeclare let window: any;\n\n@Injectable()\nexport class Web3Service {\n  private web3: any;\n  private accounts: string[];\n  public ready = false;\n  private chainIdObs: Observable<number>;\n\n  public accountsObservable = new Subject<string[]>();\n\n  constructor() {\n    window.addEventListener('load', (event) => {\n      this.bootstrapWeb3();\n    });\n\n    this.chainIdObs = timer(500, 1000).pipe(map( () => {\n      return this.chainId()\n    }, distinctUntilChanged))\n  }\n\n  public bootstrapWeb3() {\n    // Checking if Web3 has been injected by the browser (Mist/MetaMask)\n    if (typeof window.ethereum !== 'undefined') {\n      // Use Mist/MetaMask's provider\n      window.ethereum.enable().then(() => {\n        this.web3 = new Web3(window.ethereum);\n      });\n    } else {\n      console.log('No web3? You should consider trying MetaMask!');\n\n      // Hack to provide backwards compatibility for Truffle, which uses web3js 0.20.x\n      Web3.providers.HttpProvider.prototype.sendAsync = Web3.providers.HttpProvider.prototype.send;\n      // fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)\n      this.web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'));\n    }\n\n    setInterval(() => this.refreshAccounts(), 1000);\n  }\n\n  public async artifactsToContract(artifacts) {\n    if (!this.web3) {\n      const delay = new Promise(resolve => setTimeout(resolve, 100));\n      await delay;\n      return await this.artifactsToContract(artifacts);\n    }\n\n    const contractAbstraction = contract(artifacts);\n    contractAbstraction.setProvider(this.web3.currentProvider);\n    return contractAbstraction;\n\n  }\n\n  private async refreshAccounts() {\n    const accs = await this.web3.eth.getAccounts();\n\n    // Get the initial account balance so it can be displayed.\n    if (accs.length === 0) {\n      console.warn('Couldn\\'t get any accounts! Make sure your Ethereum client is configured correctly.');\n      return;\n    }\n\n    if (!this.accounts || this.accounts.length !== accs.length || this.accounts[0] !== accs[0]) {\n      console.log('Observed new accounts');\n\n      this.accountsObservable.next(accs);\n      this.accounts = accs;\n    }\n\n    this.ready = true;\n  }\n\n  public chainId(): number {\n    return _.chain(this.web3)\n      .get('currentProvider.chainId', '0')\n      .parseInt().value();\n  }\n\n  public getChainIdObs(): Observable<number> {\n    return this.chainIdObs\n  }\n\n  public tokenContract(abi: any, address: string) {\n    return new this.web3.eth.Contract(abi, address);\n  }\n\n  public isAddress(addr: string) {\n    return this.web3.utils.isAddress(addr);\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport { FormsModule, ReactiveFormsModule, } from '@angular/forms';\nimport {MetaSenderComponent} from './meta-sender/meta-sender.component';\nimport {UtilModule} from '../util/util.module';\nimport {RouterModule} from '@angular/router';\nimport { NgxFileDropModule } from 'ngx-file-drop';\n\n// material.module.ts\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\nimport {MatPaginatorModule} from '@angular/material/paginator';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport { BalancePipe } from './balance.pipe';\n\n@NgModule({\n  imports: [\n    BrowserAnimationsModule,\n    CommonModule,\n    FormsModule,\n    MatAutocompleteModule,\n    MatBadgeModule,\n    MatButtonModule,\n    MatCardModule,\n    MatChipsModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatIconModule,\n    MatInputModule,\n    MatPaginatorModule,\n    MatSelectModule,\n    MatSelectModule,\n    MatSnackBarModule,\n    MatTableModule,\n    MatToolbarModule,\n    NgxFileDropModule,\n    ReactiveFormsModule,\n    RouterModule,\n    UtilModule\n  ],\n  declarations: [MetaSenderComponent, BalancePipe],\n  exports: [MetaSenderComponent]\n})\nexport class MetaModule {\n}\n","export default \"<mat-toolbar color=\\\"primary\\\" class=\\\"toolbar\\\">\\n  <button mat-button class=\\\"example-icon\\\">\\n    批量转账工具\\n  </button>\\n  <span class=\\\"example-spacer\\\"></span>\\n  <div class=\\\"tx-details\\\">\\n    <div class=\\\"tx-details-wrapper\\\" *ngIf=\\\"pendingTx()\\\">\\n      <mat-icon aria-hidden=\\\"false\\\" aria-label=\\\"Pending Transaction\\\">loop</mat-icon>\\n      <span class=\\\"pending-tx\\\" [matTooltip]=\\\"pendingTx()\\\">{{pendingTx()}}</span>\\n    </div>\\n    <mat-progress-spinner\\n      *ngIf=\\\"isLoading()\\\"\\n      class=\\\"spinner\\\"\\n      color=\\\"warn\\\"\\n      diameter=\\\"20\\\"\\n      mode=\\\"indeterminate\\\" >\\n    </mat-progress-spinner>\\n\\n  </div>\\n</mat-toolbar>\\n<app-meta-sender></app-meta-sender>\\n\";","import { Component } from '@angular/core';\nimport { LoadingService } from 'app/meta/loading.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'app works!';\n\n  constructor(private loadingService: LoadingService) {\n  }\n\n  public isLoading() {\n    return this.loadingService.isLoading();\n  }\n\n  public pendingTx(): string {\n    return this.loadingService.getTx();\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppComponent } from './app.component';\nimport {MetaModule} from './meta/meta.module';\nimport { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n// material.module.ts\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserAnimationsModule,\n    CommonModule,\n    MatButtonModule,\n    MatCardModule,\n    MatFormFieldModule,\n    MatIconModule,\n    MatInputModule,\n    MatProgressSpinnerModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    BrowserModule,\n    FormsModule,\n    HttpClientModule,\n    MetaModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"crnd\";","export default \".container {\\n  display: flex;\\n  flex-direction: row;\\n  width: 100%;\\n}\\n\\n.settings {\\n  max-width: 420px;\\n  flex: 1;\\n}\\n\\n.details {\\n  flex: 3;\\n}\\n\\n.address-field {\\n  width: 400px;\\n}\\n\\n.token-field {\\n  width: 400px;\\n}\\n\\n.send-form {\\n  min-width: 600px;\\n}\\n\\n.account-table {\\n  width: 100%;\\n}\\n\\n.example-spacer {\\n  flex: 1 1 auto;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n\\n.invalid-address {\\n  color: red;\\n}\\n\\n.placeholder {\\n  height: 100%;\\n  padding: 0;\\n  margin: 0;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  min-height: 300px;\\n  flex: 3;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWV0YS9tZXRhLXNlbmRlci9tZXRhLXNlbmRlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsV0FBVztBQUFiOztBQUdBO0VBQ0UsZ0JBQWdCO0VBQ2hCLE9BQU87QUFBVDs7QUFHQTtFQUNFLE9BQU87QUFBVDs7QUFHQTtFQUNFLFlBQVk7QUFBZDs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFNQTtFQUNFLGdCQUFnQjtBQUhsQjs7QUFNQTtFQUNFLFdBQVc7QUFIYjs7QUFNQTtFQUNFLGNBQWM7QUFIaEI7O0FBTUE7RUFDRSxhQUFhO0FBSGY7O0FBTUE7RUFDRSxVQUFVO0FBSFo7O0FBTUE7RUFDRSxZQUFZO0VBQ1osVUFBVTtFQUNWLFNBQVM7RUFDVCxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixpQkFBaUI7RUFDakIsT0FBTztBQUhUIiwiZmlsZSI6InNyYy9hcHAvbWV0YS9tZXRhLXNlbmRlci9tZXRhLXNlbmRlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuLmNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uc2V0dGluZ3Mge1xuICBtYXgtd2lkdGg6IDQyMHB4O1xuICBmbGV4OiAxO1xufVxuXG4uZGV0YWlscyB7XG4gIGZsZXg6IDM7XG59XG5cbi5hZGRyZXNzLWZpZWxkIHtcbiAgd2lkdGg6IDQwMHB4O1xufVxuLnRva2VuLWZpZWxkIHtcbiAgd2lkdGg6IDQwMHB4O1xufVxuXG5cbi50ZXN0bmV0LWxhYmVsIHtcbn1cblxuLnNlbmQtZm9ybSB7XG4gIG1pbi13aWR0aDogNjAwcHg7XG59XG5cbi5hY2NvdW50LXRhYmxlIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5leGFtcGxlLXNwYWNlciB7XG4gIGZsZXg6IDEgMSBhdXRvO1xufVxuXG4uaGlkZGVuIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmludmFsaWQtYWRkcmVzcyB7XG4gIGNvbG9yOiByZWQ7XG59XG5cbi5wbGFjZWhvbGRlciB7XG4gIGhlaWdodDogMTAwJTtcbiAgcGFkZGluZzogMDtcbiAgbWFyZ2luOiAwO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgbWluLWhlaWdodDogMzAwcHg7XG4gIGZsZXg6IDM7XG59XG4iXX0= */\";","import {Component, AfterViewInit, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport {FormControl} from '@angular/forms';\nimport * as _ from 'lodash';\nimport * as parse from 'csv-parse/lib/sync';\ndeclare let require: any;\nconst BN = require('bignumber.js');\nimport {Web3Service} from '../../util/web3.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {MatPaginator} from '@angular/material/paginator';\nimport {MatTableDataSource} from '@angular/material/table';\nimport { LoadingService } from 'app/meta/loading.service';\n\nimport { from, of, interval, Observable, Subject, Subscription, } from 'rxjs';\nimport { catchError, combineLatest, debounceTime, finalize, map, startWith, switchMap, throttleTime, zip, } from 'rxjs/operators';\n\nconst wallebot_artifacts = require('../../../../build/contracts/WalleBot.json');\nconst erc20_artifacts = require('../../../../build/contracts/TokenImpl.json');\n\ninterface TokenData {\n  name: string;\n  address: string;\n}\n\nconst predefinedTokens = {\n  4: [{\n    name: 'CRU',\n    address: '0x002f24009df0c1e9215c98cec76f18d8eaf3db0f',\n  }, {\n    name: 'USDT',\n    address: '0xd9ba894e0097f8cc2bbc9d24d308b98e36dc6d02',\n  }],\n  1: [{\n    name: 'CRU',\n    address: '0x32a7c02e79c4ea1008dd6564b35f131428673c41'\n  }, {\n    name: 'CSM',\n    address: '0x2620638EDA99F9e7E902Ea24a285456EE9438861',\n  }, {\n    name: 'CRU18',\n    address: '0x655ad6CC3Cf6BDCCaB3fa286CB328F3bce9a3E38'\n  }, {\n    name: 'USDT',\n    address: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n  }, {\n    name: \"USDC\",\n    address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n  }]\n};\n\nconst emptyTokenArray = [] as TokenData[]\n\ninterface TokenInfo {\n  contract: any;\n  name: string;\n  decimals: number;\n  symbol: string;\n  balance: any;\n  tokenAddress;\n}\n\ninterface TokenInfoResult {\n  status?: string;\n  info?: TokenInfo;\n  transferData?: any;\n}\n\ninterface AccountData {\n  name: string;\n  address: string;\n  amount: string;\n}\n\nconst maxSize = 100 * 1024; // 100kb\n\n@Component({\n  selector: 'app-meta-sender',\n  templateUrl: './meta-sender.component.html',\n  styleUrls: ['./meta-sender.component.scss']\n})\nexport class MetaSenderComponent implements AfterViewInit, OnInit, OnDestroy {\n  @ViewChild(MatPaginator) paginator: MatPaginator;\n\n  tokenControl = new FormControl();\n\n  accounts: string[];\n  WalleBot: any;\n  ownerAccount: string;\n  batchContract: any;\n  tokenContract: any;\n  filteredTokens: any;\n  transAddress = '';\n\n  $subAccount: Subscription;\n  $subLoadBalance: Subscription;\n  $messageSub: Subscription;\n  $subToken: Subscription;\n  $subFile: Subscription;\n  fileName: string;\n  addresses: AccountData[] = [];\n  displayedColumns: string[] = ['name', 'address', 'amount', 'operations'];\n  dataSource = new MatTableDataSource<AccountData>(this.addresses);\n\n  tokenInfo: TokenInfo;\n\n  private dataObservable = new Subject<string>();\n  private tokenObservable = new Subject<TokenData>();\n\n  model = {\n    amount: 5,\n    receiver: '',\n    balance: 0,\n    account: '',\n    tokenAddress: '',\n  };\n\n  status = '';\n\n  constructor(private web3Service: Web3Service,\n              private matSnackBar: MatSnackBar,\n              private loadingService: LoadingService) {\n    console.log('Constructor: ' + web3Service);\n  }\n\n  ngOnInit(): void {\n    console.log('OnInit: ' + this.web3Service);\n    this.watchAccount();\n    const obContract = from(this.loadTransContract());\n\n    const sub = obContract.subscribe((data: any) => {\n      this.ownerAccount = data.owners;\n      this.transAddress = data.instance.address;\n      sub.unsubscribe();\n    }, () => {});\n\n    this.filteredTokens = this.tokenControl.valueChanges\n      .pipe(\n        startWith(''),\n        combineLatest(this.web3Service.getChainIdObs()),\n        map(([value]) => {\n          this.tokenObservable.next({\n            name: 'input',\n            address: value,\n          });\n          const v = _.lowerCase(value);\n          return _.chain(this.getTokens())\n            .filter((token) => _.includes(_.lowerCase(token.name), v)\n              || _.includes(_.lowerCase(token.address), v))\n            .value();\n        })\n      );\n\n    const obToken = this.tokenObservable\n      .pipe(debounceTime(1000),\n            throttleTime(500));\n\n    this.$subToken = obContract.pipe(\n      combineLatest(obToken),\n      switchMap(([transferData, token]) => {\n        this.loadingService.addLoading();\n        return this.loadTokenContractData(transferData, token.address)\n          .pipe(finalize(() => this.loadingService.removeLoading()),\n                catchError(ex => {\n                  console.error('error ', ex);\n                  return of({\n                    status: '加载信息失败',\n                  });\n                }));\n      })).subscribe((info: any) => {\n        console.log('got ', info);\n        if (!info) {\n          return;\n        }\n        if (info.status) {\n          this.setStatus(info.status);\n          return;\n        }\n\n        const transferData = info.transferData;\n        console.log('trans contract', transferData.instance.address);\n\n        if (this.$messageSub && this.$messageSub !== transferData.sub) {\n          this.$messageSub.unsubscribe();\n        }\n        this.$messageSub = transferData.sub;\n        this.batchContract = transferData.instance;\n\n        this.tokenInfo = info.info;\n      }, err => {\n        this.setStatus('加载代币信息失败');\n        console.log('error', err);\n      });\n  }\n\n  ngOnDestroy() {\n    const unsub = (s: Subscription) => {\n      if (s) {\n        s.unsubscribe();\n      }\n    };\n\n    unsub(this.$subAccount);\n    unsub(this.$subLoadBalance);\n    unsub(this.$messageSub);\n    unsub(this.$subToken);\n    unsub(this.$subFile);\n  }\n\n  ngAfterViewInit() {\n    this.dataSource.paginator = this.paginator;\n  }\n\n  watchAccount() {\n    this.$subAccount = this.web3Service.accountsObservable.subscribe((accounts) => {\n      this.accounts = accounts;\n      this.model.account = accounts[0];\n      this.refreshBalance();\n    });\n  }\n\n  setStatus(status) {\n    this.matSnackBar.open(status, null, {duration: 3000});\n  }\n\n  async sendCoin() {\n    if (!this.WalleBot) {\n      this.setStatus('WalleBot is not loaded, unable to send transaction');\n      return;\n    }\n\n    const amount = this.model.amount;\n    const receiver = this.model.receiver;\n\n    console.log('Sending coins' + amount + ' to ' + receiver);\n\n    this.setStatus('Initiating transaction... (please wait)');\n    try {\n      const deployedWalleBot = await this.WalleBot.deployed();\n      const transaction = await deployedWalleBot.sendCoin.sendTransaction(receiver, amount, {from: this.model.account});\n\n      if (!transaction) {\n        this.setStatus('Transaction failed!');\n      } else {\n        this.setStatus('Transaction complete!');\n      }\n    } catch (e) {\n      console.log(e);\n      this.setStatus('Error sending coin; see log.');\n    }\n  }\n\n  async refreshBalance() {\n    if (!this.tokenInfo) {\n      return;\n    }\n    console.log('Refreshing balance');\n    this.tokenObservable.next({\n      name: this.tokenInfo.name,\n      address: this.tokenInfo.tokenAddress,\n    });\n  }\n\n  setAmount(e) {\n    console.log('Setting amount: ' + e.target.value);\n    this.model.amount = e.target.value;\n  }\n\n  setReceiver(e) {\n    console.log('Setting receiver: ' + e.target.value);\n    this.model.receiver = e.target.value;\n  }\n\n  public isMainnet(): boolean {\n    return this.web3Service.chainId() === 1;\n  }\n\n  public chainId(): number {\n    return this.web3Service.chainId();\n  }\n\n    public isOwner(): boolean {\n      return _.some(this.ownerAccount, (acct) => acct === this.model.account);\n    }\n\n    public refreshToken() {\n\n    }\n\n    public displayTokenFn(token) {\n      if (!token) {\n        return null;\n      }\n      return token.name + ` (${token.address})`;\n    }\n\n    public selectedToken(event) {\n      this.tokenObservable.next(event.option.value);\n    }\n\n    private loadTokenInfo(token) {\n    }\n\n    private loadTokenContractData(transferData: any, tokenAddress: string): Observable<TokenInfoResult> {\n      if (!tokenAddress) {\n        return of();\n      }\n      try {\n        const contract = this.web3Service.tokenContract(erc20_artifacts.abi, tokenAddress);\n        return from(contract.methods.balanceOf(transferData.instance.address).call())\n          .pipe(zip(from(contract.methods.name().call()),\n                    from(contract.methods.symbol().call()),\n                    from(contract.methods.decimals().call())),\n                map(([balance, name, symbol, decimals]) => {\n                  console.log('info: ', balance, name, symbol, decimals);\n                  return {\n                    status: null,\n                    transferData,\n                    info: {\n                      tokenAddress,\n                      balance,\n                      contract,\n                      decimals,\n                      name,\n                      symbol,\n                    }\n                  } as any;\n                }));\n      } catch (e) {\n        console.log('caught', e);\n        return of({\n          status: 'invalid contract address',\n        });\n      }\n    }\n\n    private loadTransContract() {\n      return this.web3Service.artifactsToContract(wallebot_artifacts)\n        .then((WalleBotAbstraction) => {\n          const walleBot = WalleBotAbstraction;\n          return walleBot.deployed().then(async (deployed) => {\n            const owners = await deployed.owners.call();\n//            const sub = await deployed.TransferSuccess({\n//              fromBlock: 'latest',\n//            }, (err, ev) => {\n//              console.log('Batch transfer event came in, refreshing balance', ev);\n//              if (ev.transactionHash === this.loadingService.getTx()) {\n//                this.loadingService.setTx('');\n//              }\n//              this.refreshBalance();\n//            });\n            return {\n              instance: deployed,\n              owners,\n              sub: null,\n            };\n          });\n        });\n    }\n    public dropped(files: any[]) {\n      if (!files || files.length === 0 || files.length > 1) {\n        this.setStatus('请选择一个CSV文件, 不支持多选');\n        return;\n      }\n      const droppedFile = files[0];\n      if (droppedFile.fileEntry.isFile) {\n        const fileEntry = droppedFile.fileEntry as any;\n        fileEntry.file((file: File) => {\n          if (file.size > maxSize) {\n            this.setStatus('文件过大');\n            return;\n          }\n          console.log(droppedFile.relativePath, file);\n          this.loadFileContent(file);\n        });\n      } else {\n        this.setStatus('请选择一个CSV文件');\n      }\n    }\n\n    private loadFileContent(file: File) {\n      if (this.$subFile) {\n        this.$subFile.unsubscribe();\n      }\n      this.$subFile = this.readFile(file)\n        .pipe(map(content => {\n          return (parse as any)(content, {\n            columns: ['name', 'address', 'amount'],\n            skip_empty_lines: true\n          });\n        })).subscribe(rows => {\n          console.log('got rows', rows);\n          this.fileName = file.name;\n          const addresses = _.map(rows, (row) => {\n            return {\n              ...row,\n              amount: Number(row.amount),\n            };\n          });\n          this.setAddressess(addresses);\n        }, err => {\n          this.setStatus('读取文件失败');\n          console.log('error', err);\n        });\n    }\n\n    private readFile(file: File) {\n      return new Observable(obs => {\n        const reader: FileReader = new FileReader();\n\n        reader.onerror = err => obs.error(err);\n        reader.onabort = err => obs.error(err);\n        reader.onload = () => obs.next(reader.result);\n        reader.onloadend = () => obs.complete();\n\n        return reader.readAsText(file, 'utf8');\n      });\n    }\n\n    public doTransfer() {\n      const invalidAccount = this.firstInvalidAccount();\n      if (invalidAccount) {\n        this.setStatus(`${invalidAccount.name} 的地址错误, 请检查!`);\n        return;\n      }\n      const totalAmount = this.getTotalAmount();\n      const amount = this.convertAmountToRaw(totalAmount);\n      const balance = new BN(this.tokenInfo.balance);\n      if (amount.isGreaterThan(balance)) {\n        this.setStatus('合约中余额不足以转账, 请检查!');\n        return;\n      }\n      const addresses = _.map(this.addresses, 'address');\n      const amounts = _.map(this.addresses, (addr) => this.convertAmountToRaw(addr.amount));\n      this.loadingService.addLoading();\n      const ret = this.batchContract\n        .batchSend(this.tokenInfo.tokenAddress, addresses, amounts, {\n          from: this.model.account,\n        });\n      ret.on('transactionHash', (tx) => this.loadingService.setTx(tx));\n      ret.then((tx) => {\n        console.log('updating transaction', tx.tx);\n        this.loadingService.setTx('');\n        this.loadingService.removeLoading();\n        this.setStatus('发送交易成功');\n        this.setAddressess([]);\n        this.fileName = null;\n      }).catch(ex => {\n        this.loadingService.setTx('');\n        this.loadingService.removeLoading();\n        this.setStatus('发送交易失败');\n        console.error('faield', ex);\n      });\n      console.log('transfer');\n    }\n\n    public deleteItem(item) {\n      const addresses = _.filter(this.addresses, (v) => v !== item);\n      this.setAddressess(addresses);\n      console.log('delete item', item);\n    }\n\n    public selectFile() {\n      this.fileName = '';\n      this.setAddressess([]);\n    }\n\n    public getTotalAmount() {\n      return _.reduce(this.addresses, (total, row) => total + row.amount, 0);\n    }\n\n    public setAddressess(addresses: AccountData[]) {\n      this.addresses = addresses;\n      this.dataSource = new MatTableDataSource<AccountData>(this.addresses);\n      this.dataSource.paginator = this.paginator;\n    }\n\n    public isAddressValid(address: string) {\n      return this.web3Service.isAddress(address);\n    }\n\n    public firstInvalidAccount() {\n      return _.find(this.addresses, (account) => !this.isAddressValid(account.address));\n    }\n\n    private convertAmountToRaw(amount: number) {\n      return new BN(amount)\n        .multipliedBy(new BN(10).pow(this.tokenInfo.decimals));\n    }\n\n    private getTokens() {\n      if (!_.has(predefinedTokens, this.web3Service.chainId())) {\n        return emptyTokenArray\n      }\n      return predefinedTokens[this.web3Service.chainId()]\n    }\n}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"]}